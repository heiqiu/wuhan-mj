# 🀄 武汉麻将拆搭训练系统

一个纯JavaScript前端的武汉麻将拆搭技巧训练工具，帮助玩家通过"练习-反馈"机制提升实战判断力。

## ✨ 核心特性

- 🎲 **随机牌型生成**: 支持简单/中等/困难三种难度
- 🎯 **智能分析**: 基于拆搭原则实时分析最优打法
- 📊 **即时反馈**: 对比用户决策与最优解,给出详细评分和改进建议
- 📈 **进度跟踪**: 记录训练历史,统计平均得分和用时
- 🏆 **等级系统**: 根据平均得分评定水平等级
- 💾 **本地存储**: 使用LocalStorage保存训练记录

## 🚀 快速开始

### 方法一: 直接打开 (推荐)

1. 下载整个 `training` 目录
2. 双击打开 `index.html`
3. 点击"开始新训练"开始练习

### 方法二: 本地服务器

```bash
# 在training目录下启动简单HTTP服务器
python -m http.server 8000

# 或使用Node.js
npx http-server -p 8000

# 访问 http://localhost:8000
```

## 📂 项目结构

```
training/
├── index.html              # 主页面
├── css/
│   └── main.css           # 样式文件
└── js/
    ├── core/              # 核心算法
    │   ├── TileConstants.js   # 麻将牌常量
    │   ├── TileUtils.js       # 工具函数
    │   ├── TileGenerator.js   # 牌型生成器
    │   ├── TileAnalyzer.js    # 牌型分析器
    │   └── ScoringSystem.js   # 评分系统
    ├── state/
    │   └── GameState.js       # 状态管理
    ├── ui/
    │   ├── TileDisplay.js     # 牌面显示
    │   ├── AnalysisPanel.js   # 分析面板
    │   └── HistoryPanel.js    # 历史面板
    ├── storage/
    │   └── StorageManager.js  # 本地存储
    └── app.js                 # 主应用入口
```

## 🎮 使用说明

### 1. 开始训练

1. 选择难度等级:
   - **简单**: 1-2向听,搭子较多,适合新手
   - **中等**: 2-3向听,平衡难度
   - **困难**: 3+向听,搭子少,需要复杂判断

2. 点击 **"🎮 开始新训练"**

### 2. 进行训练

- 系统会发13张手牌,右侧显示刚摸到的牌(带动画高亮)
- 点击要打出的牌,确认后提交
- 系统实时分析并给出评分

### 3. 查看分析

分析面板包含:
- **得分圆圈**: 直观显示本轮得分(0-100分)
- **对比展示**: 你的选择 vs 最优选择
- **排名列表**: 所有打法选项按评分排序
- **改进建议**: 针对性的学习建议

### 4. 查看历史

点击 **"📊 查看历史"** 可以看到:
- 训练场次统计
- 平均得分和用时
- 当前水平等级
- 详细历史记录

## 🎯 拆搭原则

系统基于以下原则评估打牌价值:

### 优先打出
- ❌ **孤张**: 无相邻牌,无法组成搭子
- ❌ **边张**(1,2,8,9): 进张效率低
- ❌ **单张字牌**: 难以组合

### 优先保留
- ✅ **中张**(3-7): 进张效率高
- ✅ **对子/刻子**: 已成型或接近成型
- ✅ **有搭子潜力的牌**: 相邻牌多

## 📊 评分标准

| 得分 | 等级 | 说明 |
|------|------|------|
| 100 | 完美 | 选择最优解 |
| 80 | 不错 | 前三名选择 |
| 60 | 还可以 | 合理选择 |
| 40 | 次优 | 需加强判断 |
| 20 | 欠佳 | 选择较差 |

## 🏆 等级系统

根据平均得分评定:

- 🏆 **大师** (90+): 精通拆搭原则
- ⭐ **高手** (80+): 熟练掌握技巧
- 💎 **熟练** (70+): 基本掌握要点
- 🎯 **进阶** (60+): 有一定理解
- 📖 **入门** (<60): 继续加油

## 🔧 技术特点

- **纯前端实现**: 无需后端服务器,所有计算在浏览器完成
- **实时分析**: 每次操作后立即计算牌效(<100ms)
- **算法准确**: 基于麻将拆搭理论,考虑孤张、搭子、进张效率等因素
- **响应式设计**: 支持PC和移动端
- **本地存储**: 数据持久化在浏览器,隐私安全

## 📱 浏览器兼容性

支持所有现代浏览器:
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 🎓 学习建议

1. **从简单开始**: 先选择简单难度,熟悉孤张和边张识别
2. **注意反馈**: 认真阅读每轮的改进建议
3. **对比学习**: 比较自己的选择和最优解的差异
4. **持续训练**: 每天练习10-20轮,逐步提升
5. **总结规律**: 注意自己经常犯的错误,针对性改进

## 🤝 与原PHP项目的关系

本系统继承了原PHP项目 (`d:\workspace\demo\aliyun-game\esa\mj\`) 的核心算法:

| PHP项目 | 本系统 | 功能 |
|---------|--------|------|
| `Majiang::BRAND` | `TileConstants` | 牌型定义 |
| `Licensing::sort()` | `TileUtils.sortTiles()` | 理牌排序 |
| `Licensing::no_chi()` | `TileAnalyzer.isIsolatedTile()` | 孤张判断 |
| `Licensing::play_brand()` | `TileAnalyzer.findBestDiscard()` | 最佳打法 |

## 📝 开发日志

- ✅ 2026-01-10: 完整版本发布
  - 核心算法实现
  - UI组件完成
  - 状态管理和本地存储
  - 响应式设计

## 📄 许可证

本项目仅用于学习和个人使用。

## 💡 技巧提示

- 💡 多关注"改进建议"中的前三名推荐打法
- 💡 边张不一定总是最差,要看是否有搭子潜力
- 💡 字牌如果已经有对子,优先级会提高
- 💡 用时不是评分标准,慢慢思考更重要
- 💡 查看历史记录,分析进步趋势

---

**祝你早日成为麻将高手! 🎉**
